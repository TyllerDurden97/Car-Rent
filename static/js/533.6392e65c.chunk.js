"use strict";(self.webpackChunkcar_rent=self.webpackChunkcar_rent||[]).push([[533],{533:function(e,t,n){n.r(t),n.d(t,{default:function(){return Z}});var a=n(3433),r=n(9439),i="Catalog_wrapper__dyzoY",l="Catalog_imageGallery__K21PZ",c="Catalog_imageGalleryItem__bWhV8",s="Catalog_imageGalleryItemImg__dEPuP",o="Catalog_filter__-wOMJ",u="Catalog_btnFav__FYnPJ",m=n(5861),p=n(4687),d=n.n(p),f=n(1243),_="https://65043bd8c8869921ae24bc1c.mockapi.io/adverts";function h(){return h=(0,m.Z)(d().mark((function e(t){var n,a,r=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"",e.prev=1,e.next=4,f.Z.get("".concat(_,"?page=").concat(t,"&limit=").concat(n));case 4:return a=e.sent,e.abrupt("return",a);case 8:throw e.prev=8,e.t0=e.catch(1),console.log(e.t0.message),new Error(e.t0.message);case 12:case 13:case"end":return e.stop()}}),e,null,[[1,8]])}))),h.apply(this,arguments)}var g=function(e){return h.apply(this,arguments)},b=n(2791),v=n(5264),x=n(5984),j="ButtonLoadMore_buttonLm__JoeFQ",F=n(184),N=function(e){var t=e.onClick;return(0,F.jsx)("button",{className:j,type:"button",onClick:t,children:"Load more"})},S=n(1413),k={form:"Filter_form__wVnxJ",brandWrap:"Filter_brandWrap__SJT45",inputBrand:"Filter_inputBrand__su5P6",buttonOpenBrand:"Filter_buttonOpenBrand__MNglM",labelBrand:"Filter_labelBrand__SSj0t",svgOpen:"Filter_svgOpen__CdfkW",priceWrap:"Filter_priceWrap__ParfG",labelPrice:"Filter_labelPrice__Dq5Rs",inputPrice:"Filter_inputPrice__qwjiv",buttonOpenPrice:"Filter_buttonOpenPrice__nZmMo",mileageWrap:"Filter_mileageWrap__q9Vq5",inputWrap:"Filter_inputWrap__XEHXz",mileageLabel:"Filter_mileageLabel__FTo1Q",mileageInputFrom:"Filter_mileageInputFrom__-zK2+",mileageInputTo:"Filter_mileageInputTo__yabGk",buttonSearchFilter:"Filter_buttonSearchFilter__vMDgb",btnResetFilter:"Filter_btnResetFilter__wx+kv",brandList:"Filter_brandList__wWl8e",priceList:"Filter_priceList__bqh-9",brandItem:"Filter_brandItem__p004R",priceItem:"Filter_priceItem__2Q5NH"};var C=n.p+"static/media/symbol-defs.bb068d2edaa1f2c179ff3ecc52e6989e.svg",y=function(e,t){var n=t.make,a=void 0===n?"":n,r=t.price,i=void 0===r?1e3:r,l=t.milFrom,c=void 0===l?1:l,s=t.milTo,o=void 0===s?1/0:s;return e.filter((function(e){return Number(e.rentalPrice.substring(1))<="".concat(i)})).filter((function(e){return e.make===("".concat(a)||e.make)})).filter((function(e){return e.mileage>="".concat(c)&&e.mileage<="".concat(o)}))},I=function(e){var t=e.allItems,n=(e.favourItems,e.onFilter),a=(0,b.useState)(!1),i=(0,r.Z)(a,2),l=i[0],c=i[1],s=(0,b.useState)(!1),o=(0,r.Z)(s,2),u=o[0],m=o[1],p=(0,b.useState)(""),d=(0,r.Z)(p,2),f=d[0],_=d[1],h=(0,b.useState)(""),g=(0,r.Z)(h,2),v=g[0],j=g[1],N=(0,b.useState)(1),I=(0,r.Z)(N,2),Z=I[0],P=I[1],w=(0,b.useState)(1/0),O=(0,r.Z)(w,2),W=O[0],L=O[1],B=(0,b.useState)({}),T=(0,r.Z)(B,2),J=T[0],E=T[1],M=y(t,(0,S.Z)({},J));console.log("POSLE \u0424\u0418\u041b\u042c\u0422\u0420\u0410:",M);console.log("\u0424\u0418\u041b\u042c\u0422\u0420\u0410:",J);var R=t.map((function(e){return e.make})).filter((function(e,t,n){return n.indexOf(e)===t})),q=function(){for(var e=[],t=10;t<=500;t+=10)e.push(t);return e}();return(0,F.jsxs)("div",{className:k.formWrap,children:[(0,F.jsxs)("form",{onSubmit:function(e){e.preventDefault(),E({make:f,price:v,milFrom:Z,milTo:W}),n(M)},className:k.form,children:[(0,F.jsxs)("div",{className:k.brandWrap,children:[(0,F.jsx)("label",{htmlFor:"brand",className:k.labelBrand,children:"Car brand"}),(0,F.jsx)("input",{type:"text",name:"brand",id:"brand",placeholder:"Enter the text",value:f,onChange:function(e){return _(e.target.value)},className:k.inputBrand}),(0,F.jsx)("button",{type:"button","aria-label":"arrow",onClick:function(){return c(!l)},className:k.buttonOpenBrand,children:(0,F.jsx)("svg",{width:"20",height:"20",className:k.svgOpen,children:(0,F.jsx)("use",{href:"".concat(C,"#icon-chevron-down")})})}),l&&(0,F.jsx)("ul",{className:k.brandList,children:R.map((function(e){var t=(0,x.x0)();return(0,F.jsx)("li",{onClick:function(){return t="".concat(e),c(!1),void _(t);var t},className:k.brandItem,children:e},t)}))})]}),(0,F.jsxs)("div",{className:k.priceWrap,children:[(0,F.jsx)("label",{htmlFor:"price",className:k.labelPrice,children:"Price/ 1 hour"}),(0,F.jsx)("input",{type:"text",name:"price",id:"price",placeholder:"To $",value:v,onChange:function(e){return j(e.target.value)},className:k.inputPrice}),(0,F.jsx)("button",{type:"button","aria-label":"arrow",onClick:function(){return m(!u)},className:k.buttonOpenPrice,children:(0,F.jsx)("svg",{width:"20",height:"20",className:k.svgOpen,children:(0,F.jsx)("use",{href:"".concat(C,"#icon-chevron-down")})})}),u&&(0,F.jsx)("ul",{className:k.priceList,children:q.map((function(e){var t=(0,x.x0)();return(0,F.jsx)("li",{onClick:function(){return t="".concat(e),m(!1),void j(t);var t},className:k.priceItem,children:e},t)}))})]}),(0,F.jsxs)("div",{className:k.mileageWrap,children:[(0,F.jsx)("label",{htmlFor:"mileage",className:k.mileageLabel,children:"\u0421ar mileage / km"}),(0,F.jsxs)("div",{className:k.inputWrap,children:[(0,F.jsx)("input",{type:"number",id:"mileage",name:"mileageFrom",placeholder:"From",value:Z,onChange:function(e){var t=e.target.value;P(t)},className:k.mileageInputFrom}),(0,F.jsx)("input",{type:"number",id:"mileage",name:"mileageTo",placeholder:"To",value:W,onChange:function(e){var t=e.target.value;L(t)},className:k.mileageInputTo})]})]}),(0,F.jsx)("button",{type:"submit",className:k.buttonSearchFilter,children:"Search"})]}),(0,F.jsx)("button",{type:"button",className:k.btnResetFilter,onClick:function(){E({}),_(""),j(""),P(1),L(1/0)},children:"Reset filters"})]})};function Z(){var e=(0,b.useState)([]),t=(0,r.Z)(e,2),n=t[0],m=t[1],p=(0,b.useState)([]),d=(0,r.Z)(p,2),f=d[0],_=d[1],h=(0,b.useState)(1),j=(0,r.Z)(h,2),S=j[0],k=j[1],C=(0,b.useState)([]),y=(0,r.Z)(C,2),Z=y[0],P=y[1],w=(0,b.useState)([]),O=(0,r.Z)(w,2),W=O[0],L=O[1],B=(0,b.useState)([]),T=(0,r.Z)(B,2),J=T[0],E=T[1];(0,b.useEffect)((function(){g().then((function(e){P(e.data)})).catch((function(e){console.log(e),v.Notify.info("404 page not found".toUpperCase())})),L(JSON.parse(localStorage.getItem("items")))}),[]),console.log("\u0438\u0437\u0431\u0440 \u043d\u0430 \u0445\u043e\u043c\u0435:",W),(0,b.useEffect)((function(){g(S,8).then((function(e){_(e.data),m((function(t){return[].concat((0,a.Z)(t),(0,a.Z)(e.data))}))})).catch((function(e){console.log(e),v.Notify.info("404 page not found".toUpperCase())}))}),[S,J]);return console.log("\u0424\u0418\u041b\u042c\u0422\u0420 \u041d\u0410 \u0425\u041e\u041c\u0415:",J),(0,F.jsxs)("div",{className:i,children:[(0,F.jsx)("div",{className:o,children:(0,F.jsx)(I,{allItems:Z,onFilter:function(e){E(e)}})}),(0,F.jsx)("ul",{className:l,children:(J.length?J:n).map((function(e){var t=e.id,n=e.address,r=e.rentalCompany,i=e.year,l=e.type,o=e.model,m=e.img,p=e.make,d=e.rentalPrice,f=e.accessories,_=e.photoLink,h=n.replace(/[,]/g,"").split(" ").splice(-2),g=(0,x.x0)();return(0,F.jsxs)("li",{className:c,children:[(0,F.jsx)("img",{className:s,src:"".concat(m||_),alt:o}),(0,F.jsx)("span",{children:p}),(0,F.jsx)("span",{children:o}),(0,F.jsx)("span",{children:i}),(0,F.jsx)("span",{children:d}),(0,F.jsx)("span",{children:h.splice(0)}),(0,F.jsx)("span",{children:h.splice(1)}),(0,F.jsx)("span",{children:r}),(0,F.jsx)("span",{children:l}),(0,F.jsx)("span",{children:t}),(0,F.jsx)("span",{children:f[0]}),W.find((function(e){return e.id===t}))?(0,F.jsx)("button",{type:"button",onClick:function(){return function(e){L(W.filter((function(t){return t.id!==e}))),localStorage.setItem("items",JSON.stringify(W)),console.log("\u043f\u043e\u0441\u043b\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u0438\u0437 \u0438\u0437\u0431\u0440:",W)}(t)},className:u,children:" OFF"}):(0,F.jsx)("button",{type:"button",onClick:function(){return function(e){var t=Z.find((function(t){return t.id===e}));L((function(e){return[].concat((0,a.Z)(e),[t])})),localStorage.setItem("items",JSON.stringify(W)),console.log(t),console.log("\u0434\u043e\u0431\u0430\u0432 \u0432 \u0438\u0437\u0431\u0440:",W)}(t)},className:u,children:" ADD"})]},g)}))}),f.length>=8&&!J.length&&(0,F.jsx)(N,{onClick:function(){k((function(e){return e+1}))}})]})}}}]);
//# sourceMappingURL=533.6392e65c.chunk.js.map